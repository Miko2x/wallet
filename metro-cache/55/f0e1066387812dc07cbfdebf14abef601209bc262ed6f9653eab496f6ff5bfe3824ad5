{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"react-navigation","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}},{"name":"./reducer","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createReactNavigationReduxMiddleware = createReactNavigationReduxMiddleware;\n  exports.createDidUpdateCallback = createDidUpdateCallback;\n  exports.initializeListeners = initializeListeners;\n  exports.createNavigationPropConstructor = createNavigationPropConstructor;\n\n  var _reactNavigation = _$$_REQUIRE(_dependencyMap[1], \"react-navigation\");\n\n  var _invariant = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"invariant\"));\n\n  var _reducer = _$$_REQUIRE(_dependencyMap[3], \"./reducer\");\n\n  var reduxSubscribers = new Map();\n  var EMPTY_SCREEN_PROPS = {};\n\n  var getScreenProps = function getScreenProps() {\n    return EMPTY_SCREEN_PROPS;\n  };\n\n  function createReactNavigationReduxMiddleware(key, navStateSelector) {\n    reduxSubscribers.set(key, new Set());\n    return function (store) {\n      return function (next) {\n        return function (action) {\n          var oldState = store.getState();\n          var result = next(action);\n          var newState = store.getState();\n          var subscribers = reduxSubscribers.get(key);\n          (0, _invariant.default)(subscribers, \"subscribers set should exist for \" + key);\n          triggerAllSubscribers(key, subscribers, {\n            type: 'action',\n            action: action,\n            state: navStateSelector(newState),\n            lastState: navStateSelector(oldState)\n          });\n          return result;\n        };\n      };\n    };\n  }\n\n  var delaySubscriberTriggerUntilReactReduxConnectTriggers = false;\n  var delayedTriggers = new Map();\n\n  function triggerAllSubscribers(key, subscribers, payload) {\n    var trigger = function trigger() {\n      return subscribers.forEach(function (subscriber) {\n        return subscriber(payload);\n      });\n    };\n\n    if (!delaySubscriberTriggerUntilReactReduxConnectTriggers || !payload.action.hasOwnProperty('type') || !payload.action.type.startsWith(\"Navigation\") || payload.state === payload.lastState) {\n      trigger();\n      return;\n    }\n\n    var existingTriggers = delayedTriggers.get(key);\n\n    if (existingTriggers) {\n      existingTriggers.push(trigger);\n    } else {\n      delayedTriggers.set(key, [trigger]);\n    }\n  }\n\n  function triggerDelayedSubscribers(key) {\n    var triggers = delayedTriggers.get(key);\n\n    if (!triggers) {\n      return;\n    }\n\n    delayedTriggers.delete(key);\n\n    for (var _iterator = triggers, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\"]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var _trigger = _ref;\n\n      _trigger();\n    }\n  }\n\n  function createDidUpdateCallback(key) {\n    delaySubscriberTriggerUntilReactReduxConnectTriggers = true;\n    return triggerDelayedSubscribers.bind(null, key);\n  }\n\n  function initializeListeners(key, state) {\n    var subscribers = reduxSubscribers.get(key);\n    (0, _invariant.default)(subscribers, \"Before calling `reduxifyNavigator`, please call \" + \"`createReactNavigationReduxMiddleware`, so that we know \" + \"when to trigger your listener.\");\n    triggerAllSubscribers(key, subscribers, {\n      type: 'action',\n      action: _reducer.initAction,\n      state: state,\n      lastState: null\n    });\n\n    if (delaySubscriberTriggerUntilReactReduxConnectTriggers) {\n      triggerDelayedSubscribers(key);\n    }\n  }\n\n  function createNavigationPropConstructor(key) {\n    var actionSubscribers = reduxSubscribers.get(key);\n    (0, _invariant.default)(actionSubscribers, \"Before calling `reduxifyNavigator`, please call \" + \"`createReactNavigationReduxMiddleware`, so that we know \" + \"when to trigger your listener.\");\n    return function (dispatch, state, router, getCurrentNavigation) {\n      (0, _invariant.default)(router, \"App.router must be provided to createNavigationPropConstructor as of \" + \"react-navigation-redux-helpers@2.0.0. Learn more: \" + \"https://reactnavigation.org/docs/en/\" + \"redux-integration.html#breaking-changes-in-2.3\");\n      (0, _invariant.default)(getCurrentNavigation, \"getCurrentNavigation must be provided to createNavigationPropConstructor as of \" + \"react-navigation-redux-helpers@2.0.0. Learn more: \" + \"https://reactnavigation.org/docs/en/\" + \"redux-integration.html#breaking-changes-in-2.3\");\n      return (0, _reactNavigation.getNavigation)(router, state, dispatch, actionSubscribers, getScreenProps, getCurrentNavigation);\n    };\n  }\n});","map":[[12,0,3,0],[14,0,14,0],[16,0,16,0],[18,0,18,0],[18,6,18,6,"reduxSubscribers"],[18,22,18,22],[18,25,18,25],[18,29,18,29,"Map"],[18,32,18,25],[18,34,18,0],[19,0,22,0],[19,6,22,6,"EMPTY_SCREEN_PROPS"],[19,24,22,24],[19,27,22,27],[19,29,22,0],[21,0,23,0],[21,6,23,6,"getScreenProps"],[21,20,23,20],[21,23,23,23],[21,32,23,6,"getScreenProps"],[21,46,23,23],[22,0,23,23],[22,11,23,29,"EMPTY_SCREEN_PROPS"],[22,29,23,23],[23,0,23,23],[23,3,23,0],[25,0,25,0],[25,11,25,9,"createReactNavigationReduxMiddleware"],[25,47,25,0],[25,48,26,2,"key"],[25,51,25,0],[25,53,27,2,"navStateSelector"],[25,69,25,0],[25,71,28,27],[26,0,29,2,"reduxSubscribers"],[26,4,29,2,"reduxSubscribers"],[26,20,29,18],[26,21,29,19,"set"],[26,24,29,2],[26,25,29,23,"key"],[26,28,29,2],[26,30,29,28],[26,34,29,32,"Set"],[26,37,29,28],[26,39,29,2],[27,0,30,2],[27,11,30,9],[27,21,30,9,"store"],[27,26,30,14],[28,0,30,14],[28,13,30,18],[28,23,30,18,"next"],[28,27,30,22],[29,0,30,22],[29,15,30,26],[29,25,30,26,"action"],[29,31,30,32],[29,33,30,36],[30,0,31,4],[30,14,31,10,"oldState"],[30,22,31,18],[30,25,31,21,"store"],[30,30,31,26],[30,31,31,27,"getState"],[30,39,31,21],[30,41,31,4],[31,0,32,4],[31,14,32,10,"result"],[31,20,32,16],[31,23,32,19,"next"],[31,27,32,23],[31,28,32,24,"action"],[31,34,32,23],[31,35,32,4],[32,0,33,4],[32,14,33,10,"newState"],[32,22,33,18],[32,25,33,21,"store"],[32,30,33,26],[32,31,33,27,"getState"],[32,39,33,21],[32,41,33,4],[33,0,34,4],[33,14,34,10,"subscribers"],[33,25,34,21],[33,28,34,24,"reduxSubscribers"],[33,44,34,40],[33,45,34,41,"get"],[33,48,34,24],[33,49,34,45,"key"],[33,52,34,24],[33,53,34,4],[34,0,35,4],[34,34,35,14,"subscribers"],[34,45,35,4],[34,85,35,63,"key"],[34,88,35,4],[35,0,36,4,"triggerAllSubscribers"],[35,10,36,4,"triggerAllSubscribers"],[35,31,36,25],[35,32,37,6,"key"],[35,35,36,25],[35,37,38,6,"subscribers"],[35,48,36,25],[35,50,39,6],[36,0,40,8,"type"],[36,12,40,8,"type"],[36,16,40,12],[36,18,40,14],[36,26,39,6],[37,0,41,8,"action"],[37,12,41,8,"action"],[37,18,41,14],[37,20,41,8,"action"],[37,26,39,6],[38,0,42,8,"state"],[38,12,42,8,"state"],[38,17,42,13],[38,19,42,15,"navStateSelector"],[38,35,42,31],[38,36,42,32,"newState"],[38,44,42,31],[38,45,39,6],[39,0,43,8,"lastState"],[39,12,43,8,"lastState"],[39,21,43,17],[39,23,43,19,"navStateSelector"],[39,39,43,35],[39,40,43,36,"oldState"],[39,48,43,35],[40,0,39,6],[40,11,36,25],[40,12,36,4],[41,0,46,4],[41,17,46,11,"result"],[41,23,46,4],[42,0,47,3],[42,9,30,22],[43,0,30,22],[43,7,30,14],[44,0,30,14],[44,5,30,2],[45,0,48,1],[47,0,50,0],[47,6,50,4,"delaySubscriberTriggerUntilReactReduxConnectTriggers"],[47,58,50,56],[47,61,50,59],[47,66,50,0],[48,0,51,0],[48,6,51,6,"delayedTriggers"],[48,21,51,21],[48,24,51,24],[48,28,51,28,"Map"],[48,31,51,24],[48,33,51,0],[50,0,53,0],[50,11,53,9,"triggerAllSubscribers"],[50,32,53,0],[50,33,54,2,"key"],[50,36,53,0],[50,38,55,2,"subscribers"],[50,49,53,0],[50,51,56,2,"payload"],[50,58,53,0],[50,60,57,2],[51,0,58,2],[51,8,58,8,"trigger"],[51,15,58,15],[51,18,58,18],[51,27,58,8,"trigger"],[51,34,58,18],[52,0,58,18],[52,13,58,24,"subscribers"],[52,24,58,35],[52,25,58,36,"forEach"],[52,32,58,24],[52,33,58,44],[52,43,58,44,"subscriber"],[52,53,58,54],[53,0,58,54],[53,15,58,58,"subscriber"],[53,25,58,68],[53,26,58,69,"payload"],[53,33,58,68],[53,34,58,54],[54,0,58,54],[54,7,58,24],[54,8,58,18],[55,0,58,18],[55,5,58,2],[57,0,59,2],[57,8,60,4],[57,9,60,5,"delaySubscriberTriggerUntilReactReduxConnectTriggers"],[57,61,60,4],[57,65,61,4],[57,66,61,5,"payload"],[57,73,61,12],[57,74,61,13,"action"],[57,80,61,5],[57,81,61,20,"hasOwnProperty"],[57,95,61,5],[57,96,61,35],[57,102,61,5],[57,103,60,4],[57,107,62,4],[57,108,62,5,"payload"],[57,115,62,12],[57,116,62,13,"action"],[57,122,62,5],[57,123,62,20,"type"],[57,127,62,5],[57,128,62,25,"startsWith"],[57,138,62,5],[57,139,62,36],[57,151,62,5],[57,152,60,4],[57,156,63,4,"payload"],[57,163,63,11],[57,164,63,12,"state"],[57,169,63,4],[57,174,63,22,"payload"],[57,181,63,29],[57,182,63,30,"lastState"],[57,191,59,2],[57,193,64,4],[58,0,65,4,"trigger"],[58,6,65,4,"trigger"],[58,13,65,11],[59,0,66,4],[60,0,67,3],[62,0,68,2],[62,8,68,8,"existingTriggers"],[62,24,68,24],[62,27,68,27,"delayedTriggers"],[62,42,68,42],[62,43,68,43,"get"],[62,46,68,27],[62,47,68,47,"key"],[62,50,68,27],[62,51,68,2],[64,0,69,2],[64,8,69,6,"existingTriggers"],[64,24,69,2],[64,26,69,24],[65,0,70,4,"existingTriggers"],[65,6,70,4,"existingTriggers"],[65,22,70,20],[65,23,70,21,"push"],[65,27,70,4],[65,28,70,26,"trigger"],[65,35,70,4],[66,0,71,3],[66,5,69,2],[66,11,71,9],[67,0,72,4,"delayedTriggers"],[67,6,72,4,"delayedTriggers"],[67,21,72,19],[67,22,72,20,"set"],[67,25,72,4],[67,26,72,24,"key"],[67,29,72,4],[67,31,72,29],[67,32,72,30,"trigger"],[67,39,72,29],[67,40,72,4],[68,0,73,3],[69,0,74,1],[71,0,76,0],[71,11,76,9,"triggerDelayedSubscribers"],[71,36,76,0],[71,37,76,35,"key"],[71,40,76,0],[71,42,76,48],[72,0,77,2],[72,8,77,8,"triggers"],[72,16,77,16],[72,19,77,19,"delayedTriggers"],[72,34,77,34],[72,35,77,35,"get"],[72,38,77,19],[72,39,77,39,"key"],[72,42,77,19],[72,43,77,2],[74,0,78,2],[74,8,78,6],[74,9,78,7,"triggers"],[74,17,78,2],[74,19,78,17],[75,0,79,4],[76,0,80,3],[78,0,81,2,"delayedTriggers"],[78,4,81,2,"delayedTriggers"],[78,19,81,17],[78,20,81,18,"delete"],[78,26,81,2],[78,27,81,25,"key"],[78,30,81,2],[80,0,82,2],[80,25,82,22,"triggers"],[80,33,82,2],[80,193,82,32],[81,0,82,32],[83,0,82,32],[84,0,82,32],[85,0,82,32],[86,0,82,32],[87,0,82,32],[88,0,82,32],[89,0,82,32],[90,0,82,32],[92,0,82,32],[92,10,82,11,"trigger"],[92,18,82,32],[94,0,83,4,"trigger"],[94,6,83,4,"trigger"],[94,14,83,11],[95,0,84,3],[96,0,85,1],[98,0,87,0],[98,11,87,9,"createDidUpdateCallback"],[98,34,87,0],[98,35,87,33,"key"],[98,38,87,0],[98,40,87,46],[99,0,88,2,"delaySubscriberTriggerUntilReactReduxConnectTriggers"],[99,4,88,2,"delaySubscriberTriggerUntilReactReduxConnectTriggers"],[99,56,88,54],[99,59,88,57],[99,63,88,2],[100,0,89,2],[100,11,89,9,"triggerDelayedSubscribers"],[100,36,89,34],[100,37,89,35,"bind"],[100,41,89,9],[100,42,89,40],[100,46,89,9],[100,48,89,46,"key"],[100,51,89,9],[100,52,89,2],[101,0,90,1],[103,0,92,0],[103,11,92,9,"initializeListeners"],[103,30,92,0],[103,31,92,29,"key"],[103,34,92,0],[103,36,92,42,"state"],[103,41,92,0],[103,43,92,66],[104,0,93,2],[104,8,93,8,"subscribers"],[104,19,93,19],[104,22,93,22,"reduxSubscribers"],[104,38,93,38],[104,39,93,39,"get"],[104,42,93,22],[104,43,93,43,"key"],[104,46,93,22],[104,47,93,2],[105,0,94,2],[105,28,95,4,"subscribers"],[105,39,94,2],[105,41,96,4],[105,94,97,6],[105,152,96,4],[105,155,98,6],[105,187,94,2],[106,0,100,2,"triggerAllSubscribers"],[106,4,100,2,"triggerAllSubscribers"],[106,25,100,23],[106,26,101,4,"key"],[106,29,100,23],[106,31,102,4,"subscribers"],[106,42,100,23],[106,44,103,4],[107,0,104,6,"type"],[107,6,104,6,"type"],[107,10,104,10],[107,12,104,12],[107,20,103,4],[108,0,105,6,"action"],[108,6,105,6,"action"],[108,12,105,12],[108,14,105,14,"initAction"],[108,33,103,4],[109,0,106,6,"state"],[109,6,106,6,"state"],[109,11,106,11],[109,13,106,13,"state"],[109,18,103,4],[110,0,107,6,"lastState"],[110,6,107,6,"lastState"],[110,15,107,15],[110,17,107,17],[111,0,103,4],[111,5,100,23],[111,6,100,2],[113,0,110,2],[113,8,110,6,"delaySubscriberTriggerUntilReactReduxConnectTriggers"],[113,60,110,2],[113,62,110,60],[114,0,111,4,"triggerDelayedSubscribers"],[114,6,111,4,"triggerDelayedSubscribers"],[114,31,111,29],[114,32,111,30,"key"],[114,35,111,29],[114,36,111,4],[115,0,112,3],[116,0,113,1],[118,0,115,0],[118,11,115,9,"createNavigationPropConstructor"],[118,42,115,0],[118,43,115,41,"key"],[118,46,115,0],[118,48,115,54],[119,0,116,2],[119,8,116,8,"actionSubscribers"],[119,25,116,25],[119,28,116,28,"reduxSubscribers"],[119,44,116,44],[119,45,116,45,"get"],[119,48,116,28],[119,49,116,49,"key"],[119,52,116,28],[119,53,116,2],[120,0,117,2],[120,28,118,4,"actionSubscribers"],[120,45,117,2],[120,47,119,4],[120,100,120,6],[120,158,119,4],[120,161,121,6],[120,193,117,2],[121,0,123,2],[121,11,123,9],[121,21,124,4,"dispatch"],[121,29,123,9],[121,31,125,4,"state"],[121,36,123,9],[121,38,126,4,"router"],[121,44,123,9],[121,46,127,4,"getCurrentNavigation"],[121,66,123,9],[121,68,128,36],[122,0,129,4],[122,30,130,6,"router"],[122,36,129,4],[122,38,131,6],[122,112,132,8],[122,164,131,6],[122,167,133,8],[122,205,131,6],[122,208,134,8],[122,256,129,4],[123,0,136,4],[123,30,137,6,"getCurrentNavigation"],[123,50,136,4],[123,52,138,6],[123,136,139,8],[123,188,138,6],[123,191,140,8],[123,229,138,6],[123,232,141,8],[123,280,136,4],[124,0,143,4],[124,13,143,11],[124,49,144,6,"router"],[124,55,143,11],[124,57,145,6,"state"],[124,62,143,11],[124,64,146,6,"dispatch"],[124,72,143,11],[124,74,147,6,"actionSubscribers"],[124,91,143,11],[124,93,148,6,"getScreenProps"],[124,107,143,11],[124,109,149,6,"getCurrentNavigation"],[124,129,143,11],[124,130,143,4],[125,0,151,3],[125,5,123,2],[126,0,152,1]]},"type":"js/module"}]}