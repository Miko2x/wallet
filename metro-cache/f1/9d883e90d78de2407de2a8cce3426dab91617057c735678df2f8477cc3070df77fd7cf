{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"eventemitter3","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var _possibleConstructorReturn = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/possibleConstructorReturn\");\n\n  var _getPrototypeOf = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/getPrototypeOf\");\n\n  var _inherits = _$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/inherits\");\n\n  var EventEmitter = _$$_REQUIRE(_dependencyMap[5], \"eventemitter3\");\n\n  var MetroClient = function (_EventEmitter) {\n    _inherits(MetroClient, _EventEmitter);\n\n    function MetroClient(url) {\n      var _this;\n\n      _classCallCheck(this, MetroClient);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MetroClient).call(this));\n      _this._url = url;\n      return _this;\n    }\n\n    _createClass(MetroClient, [{\n      key: \"enable\",\n      value: function enable() {\n        var _this2 = this;\n\n        if (this._ws) {\n          this.disable();\n        }\n\n        this._ws = new global.WebSocket(this._url);\n\n        this._ws.onerror = function (error) {\n          _this2.emit(\"connection-error\", error);\n        };\n\n        this._ws.onclose = function () {\n          _this2.emit(\"close\");\n        };\n\n        this._ws.onmessage = function (message) {\n          var data = JSON.parse(message.data);\n\n          switch (data.type) {\n            case \"update-start\":\n              _this2.emit(\"update-start\");\n\n              break;\n\n            case \"update\":\n              var _data$body = data.body;\n              var modules = _data$body.modules,\n                  sourceMappingURLs = _data$body.sourceMappingURLs,\n                  sourceURLs = _data$body.sourceURLs;\n\n              _this2.emit(\"update\");\n\n              modules.forEach(function (_ref, i) {\n                var id = _ref.id,\n                    code = _ref.code;\n                code += \"\\n\\n\" + sourceMappingURLs[i];\n                var injectFunction = typeof global.nativeInjectHMRUpdate === \"function\" ? global.nativeInjectHMRUpdate : eval;\n                injectFunction(code, sourceURLs[i]);\n              });\n              break;\n\n            case \"update-done\":\n              _this2.emit(\"update-done\");\n\n              break;\n\n            case \"error\":\n              _this2.emit(\"error\", data.body);\n\n              break;\n\n            default:\n              _this2.emit(\"error\", {\n                type: \"unknown-message\",\n                message: data\n              });\n\n          }\n        };\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        if (this._ws) {\n          this._ws.close();\n\n          this._ws = undefined;\n        }\n      }\n    }]);\n\n    return MetroClient;\n  }(EventEmitter);\n\n  module.exports = MetroClient;\n});","map":[[2,0,10,0],[14,0,12,0],[14,6,12,6,"EventEmitter"],[14,18,12,18],[14,21,12,21,"require"],[14,32,12,28],[14,68,12,0],[16,6,18,6,"MetroClient"],[16,17],[19,0,19,2],[19,25,19,14,"url"],[19,28,19,2],[19,30,19,19],[20,0,19,19],[22,0,19,19],[24,0,20,4],[25,0,21,4],[25,12,21,9,"_url"],[25,16,21,4],[25,19,21,16,"url"],[25,22,21,4],[26,0,19,19],[27,0,22,3],[31,31,24,11],[32,0,24,11],[34,0,25,4],[34,12,25,8],[34,17,25,13,"_ws"],[34,20,25,4],[34,22,25,18],[35,0,26,6],[35,15,26,11,"disable"],[35,22,26,6],[36,0,27,5],[38,0,31,4],[38,13,31,9,"_ws"],[38,16,31,4],[38,19,31,15],[38,23,31,19,"global"],[38,29,31,25],[38,30,31,26,"WebSocket"],[38,39,31,15],[38,40,31,36],[38,45,31,41,"_url"],[38,49,31,15],[38,50,31,4],[40,0,32,4],[40,13,32,9,"_ws"],[40,16,32,4],[40,17,32,13,"onerror"],[40,24,32,4],[40,27,32,23],[40,37,32,23,"error"],[40,42,32,28],[40,44,32,32],[41,0,33,6],[41,10,33,6],[41,16,33,10],[41,17,33,11,"emit"],[41,21,33,6],[41,22,33,16],[41,40,33,6],[41,42,33,36,"error"],[41,47,33,6],[42,0,34,5],[42,9,32,4],[44,0,35,4],[44,13,35,9,"_ws"],[44,16,35,4],[44,17,35,13,"onclose"],[44,24,35,4],[44,27,35,23],[44,39,35,29],[45,0,36,6],[45,10,36,6],[45,16,36,10],[45,17,36,11,"emit"],[45,21,36,6],[45,22,36,16],[45,29,36,6],[46,0,37,5],[46,9,35,4],[48,0,38,4],[48,13,38,9,"_ws"],[48,16,38,4],[48,17,38,13,"onmessage"],[48,26,38,4],[48,29,38,25],[48,39,38,25,"message"],[48,46,38,32],[48,48,38,36],[49,0,39,6],[49,14,39,12,"data"],[49,18,39,16],[49,21,39,19,"JSON"],[49,25,39,23],[49,26,39,24,"parse"],[49,31,39,19],[49,32,39,30,"message"],[49,39,39,37],[49,40,39,38,"data"],[49,44,39,19],[49,45,39,6],[51,0,40,6],[51,18,40,14,"data"],[51,22,40,18],[51,23,40,19,"type"],[51,27,40,6],[52,0,41,8],[52,17,41,13],[52,31,41,8],[53,0,42,10],[53,14,42,10],[53,20,42,14],[53,21,42,15,"emit"],[53,25,42,10],[53,26,42,20],[53,40,42,10],[55,0,43,10],[57,0,45,8],[57,17,45,13],[57,25,45,8],[58,0,46,10],[58,18,46,14,"_data$body"],[58,28,46,24],[58,31,46,27,"data"],[58,35,46,31],[58,36,46,32,"body"],[58,40,46,10],[59,0,47,10],[59,18,47,16,"modules"],[59,25,47,23],[59,28,47,26,"_data$body"],[59,38,47,36],[59,39,47,37,"modules"],[59,46,47,10],[60,0,47,10],[60,18,48,12,"sourceMappingURLs"],[60,35,48,29],[60,38,48,32,"_data$body"],[60,48,48,42],[60,49,48,43,"sourceMappingURLs"],[60,66,47,10],[61,0,47,10],[61,18,49,12,"sourceURLs"],[61,28,49,22],[61,31,49,25,"_data$body"],[61,41,49,35],[61,42,49,36,"sourceURLs"],[61,52,47,10],[63,0,51,10],[63,14,51,10],[63,20,51,14],[63,21,51,15,"emit"],[63,25,51,10],[63,26,51,20],[63,34,51,10],[65,0,52,10,"modules"],[65,14,52,10,"modules"],[65,21,52,17],[65,22,52,18,"forEach"],[65,29,52,10],[65,30,52,26],[65,40,52,27,"_ref"],[65,44,52,26],[65,46,52,33,"i"],[65,47,52,26],[65,49,52,39],[66,0,53,12],[66,20,53,16,"id"],[66,22,53,18],[66,25,53,21,"_ref"],[66,29,53,25],[66,30,53,26,"id"],[66,32,53,12],[67,0,53,12],[67,20,54,14,"code"],[67,24,54,18],[67,27,54,21,"_ref"],[67,31,54,25],[67,32,54,26,"code"],[67,36,53,12],[68,0,55,12,"code"],[68,16,55,12,"code"],[68,20,55,16],[68,24,55,20],[68,33,55,29,"sourceMappingURLs"],[68,50,55,46],[68,51,55,47,"i"],[68,52,55,46],[68,53,55,12],[69,0,60,12],[69,20,60,18,"injectFunction"],[69,34,60,32],[69,37,61,14],[69,44,61,21,"global"],[69,50,61,27],[69,51,61,28,"nativeInjectHMRUpdate"],[69,72,61,14],[69,77,61,54],[69,87,61,14],[69,90,62,18,"global"],[69,96,62,24],[69,97,62,25,"nativeInjectHMRUpdate"],[69,118,61,14],[69,121,63,18,"eval"],[69,125,60,12],[70,0,65,12,"injectFunction"],[70,16,65,12,"injectFunction"],[70,30,65,26],[70,31,65,27,"code"],[70,35,65,26],[70,37,65,33,"sourceURLs"],[70,47,65,43],[70,48,65,44,"i"],[70,49,65,43],[70,50,65,26],[70,51,65,12],[71,0,66,11],[71,15,52,10],[72,0,67,10],[74,0,69,8],[74,17,69,13],[74,30,69,8],[75,0,70,10],[75,14,70,10],[75,20,70,14],[75,21,70,15,"emit"],[75,25,70,10],[75,26,70,20],[75,39,70,10],[77,0,71,10],[79,0,73,8],[79,17,73,13],[79,24,73,8],[80,0,74,10],[80,14,74,10],[80,20,74,14],[80,21,74,15,"emit"],[80,25,74,10],[80,26,74,20],[80,33,74,10],[80,35,74,29,"data"],[80,39,74,33],[80,40,74,34,"body"],[80,44,74,10],[82,0,75,10],[84,0,77,8],[85,0,78,10],[85,14,78,10],[85,20,78,14],[85,21,78,15,"emit"],[85,25,78,10],[85,26,78,20],[85,33,78,10],[85,35,78,29],[86,0,78,31,"type"],[86,16,78,31,"type"],[86,20,78,35],[86,22,78,37],[86,39,78,29],[87,0,78,56,"message"],[87,16,78,56,"message"],[87,23,78,63],[87,25,78,65,"data"],[88,0,78,29],[88,15,78,10],[90,0,40,6],[91,0,80,5],[91,9,38,4],[92,0,81,3],[95,32,83,12],[96,0,84,4],[96,12,84,8],[96,17,84,13,"_ws"],[96,20,84,4],[96,22,84,18],[97,0,85,6],[97,15,85,11,"_ws"],[97,18,85,6],[97,19,85,15,"close"],[97,24,85,6],[99,0,86,6],[99,15,86,11,"_ws"],[99,18,86,6],[99,21,86,17,"undefined"],[99,30,86,6],[100,0,87,5],[101,0,88,3],[105,4,18,26,"EventEmitter"],[105,16],[107,0,91,0,"module"],[107,2,91,0,"module"],[107,8,91,6],[107,9,91,7,"exports"],[107,16,91,0],[107,19,91,17,"MetroClient"],[107,30,91,0]]},"type":"js/module"}]}